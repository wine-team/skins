(function($){$.fn.image_slider=function(q){q=$.extend({srcs:"lazy",auto:1,showd:1,tim:4000},q||{});return this.each(function(){var boxs=$(this);var len=boxs.find("li").length;var index=0;var picTimer;var h_pre=boxs.find(".h_pre");var h_nxt=boxs.find(".h_nxt");var btn="<div class='btn'>";for(var i=0;i<len;i++){var k=i+1;btn+="<span>"+k+"</span>"}btn+="</div>";boxs.append(btn);var $spn=boxs.find(".btn span");$spn.mouseenter(function(){index=$(this).index();showPics(index)});init();function init(){showPics(index);if(q.auto==1){picTimer=setInterval(function(){index++;if(index>len-1){index=0}showPics(index)},q.tim)}}boxs.hover(function(){clearInterval(picTimer);h_pre.fadeIn(200);h_nxt.fadeIn(200)},function(){h_pre.hide();h_nxt.hide();if(q.auto==1){picTimer=setInterval(function(){index++;if(index>len-1){index=0}showPics(index)},q.tim)}});h_pre.click(function(){index--;if(index<0){index=len-1}showPics(index)});h_nxt.click(function(){index++;if(index>len-1){index=0}showPics(index)});function showPics(index){var k=boxs.find("li").eq(index);var m=k.attr("lazy");if(m){k.css("background-image","url("+m+")").removeAttr("lazy")}k.stop(true,true).fadeIn(600).siblings("li").fadeOut(600);$spn.removeClass("on").eq(index).addClass("on")}})}})(jQuery);
